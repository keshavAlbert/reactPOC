{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport { defer, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { getOrCreateSharedStore } from '../../../../shared/store';\nimport * as SharedStateActions from './shared-state.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nexport let SharedStateEffects = /*#__PURE__*/(() => {\n  class SharedStateEffects {\n    constructor(actions$, zone) {\n      this.actions$ = actions$;\n      this.zone = zone;\n      this.sharedStore = getOrCreateSharedStore();\n      this.syncFromExternal$ = createEffect(() => defer(() => new Observable(subscriber => {\n        subscriber.next(SharedStateActions.syncFromExternal({\n          state: this.sharedStore.getState()\n        }));\n        const unsubscribe = this.sharedStore.subscribe(state => {\n          this.zone.run(() => subscriber.next(SharedStateActions.syncFromExternal({\n            state\n          })));\n        });\n        return () => unsubscribe();\n      })));\n      this.forwardSection$ = createEffect(() => this.actions$.pipe(ofType(SharedStateActions.selectSection), tap(({\n        sectionId\n      }) => this.sharedStore.setState({\n        selectedSection: sectionId\n      }))), {\n        dispatch: false\n      });\n      this.forwardForm$ = createEffect(() => this.actions$.pipe(ofType(SharedStateActions.updateForm), tap(({\n        changes\n      }) => this.sharedStore.updateForm(changes))), {\n        dispatch: false\n      });\n    }\n    static {\n      this.ɵfac = function SharedStateEffects_Factory(t) {\n        return new (t || SharedStateEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i0.NgZone));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: SharedStateEffects,\n        factory: SharedStateEffects.ɵfac\n      });\n    }\n  }\n  return SharedStateEffects;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}